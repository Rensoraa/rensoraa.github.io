<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discord Profile Previewer</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" />
</head>
<body>
  <div class="container">
    <div class="profile-card">
      <div class="banner" id="banner"></div>
      <div class="avatar-container">
        <img id="avatar" class="avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" alt="Avatar" />
      </div>
      <div class="info">
        <h2 id="username">Username</h2>
        <p id="tag" class="tag">#0001</p>
        <p class="status" id="status">ðŸŽ® Playing Dead by Daylight</p>
        <div class="about" id="aboutContainer">
          <p id="about">This is the about me section!</p>
        </div>
      </div>
    </div>

    <div class="controls">
      <label>Upload Avatar:
        <input type="file" id="avatarInput" accept="image/*" />
      </label>
      <label>Upload Banner Image:
        <input type="file" id="bannerInput" accept="image/*" />
      </label>

      <input type="text" id="nameInput" placeholder="Enter username..." />
      <input type="text" id="tagInput" placeholder="Enter tag (e.g. #1234)" />
      <input type="text" id="statusInput" placeholder="Enter custom status..." />
      <textarea id="aboutInput" placeholder="Enter About Me..."></textarea>
    </div>
  </div>

  <!-- Cropping Modal -->
  <div class="crop-overlay hidden" id="cropOverlay">
    <div class="crop-container">
      <img id="cropImage" alt="Crop preview" />
      <div class="crop-buttons">
        <button id="cropConfirm">Crop</button>
        <button id="cropCancel">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
  <script>
    const avatarInput = document.getElementById('avatarInput');
    const bannerInput = document.getElementById('bannerInput');
    const avatar = document.getElementById('avatar');
    const banner = document.getElementById('banner');

    const username = document.getElementById('username');
    const tag = document.getElementById('tag');
    const status = document.getElementById('status');
    const about = document.getElementById('about');

    const nameInput = document.getElementById('nameInput');
    const tagInput = document.getElementById('tagInput');
    const statusInput = document.getElementById('statusInput');
    const aboutInput = document.getElementById('aboutInput');

    const cropOverlay = document.getElementById('cropOverlay');
    const cropImage = document.getElementById('cropImage');
    const cropConfirm = document.getElementById('cropConfirm');
    const cropCancel = document.getElementById('cropCancel');
    let cropper = null;
    let currentTarget = null;

    let bannerImageSet = false;
    let bannerImageUrl = '';

    function openCropper(file, target) {
      currentTarget = target;
      const reader = new FileReader();
      reader.onload = e => {
        cropImage.src = e.target.result;
        cropOverlay.classList.remove('hidden');
        cropper = new Cropper(cropImage, {
          aspectRatio: target === 'avatar' ? 1 : 680/240,
          viewMode: 1,
          background: false,
          autoCropArea: 1
        });
      };
      reader.readAsDataURL(file);
    }

    cropConfirm.addEventListener('click', () => {
      const canvas = cropper.getCroppedCanvas({
        width: currentTarget==='banner'?680:120,
        height: currentTarget==='banner'?240:120
      });
      const croppedData = canvas.toDataURL('image/png');

      if(currentTarget==='avatar') avatar.src = croppedData;
      else if(currentTarget==='banner') {
        bannerImageSet = true;
        bannerImageUrl = croppedData;
        banner.style.backgroundImage = `url(${bannerImageUrl})`;
        banner.style.backgroundSize = 'cover';
        banner.style.backgroundPosition = 'center';
      }

      cropper.destroy();
      cropOverlay.classList.add('hidden');
    });

    cropCancel.addEventListener('click', () => {
      if(cropper) cropper.destroy();
      cropOverlay.classList.add('hidden');
    });

    avatarInput.addEventListener('change', e => {if(e.target.files[0]) openCropper(e.target.files[0],'avatar');});
    bannerInput.addEventListener('change', e => {if(e.target.files[0]) openCropper(e.target.files[0],'banner');});

    nameInput.addEventListener('input', e => username.textContent = e.target.value || 'Username');
    tagInput.addEventListener('input', e => tag.textContent = e.target.value || '#0001');
    statusInput.addEventListener('input', e => status.textContent = e.target.value || 'ðŸŽ® Playing Dead by Daylight');
    aboutInput.addEventListener('input', e => about.textContent = e.target.value || 'This is the about me section!');
  </script>
</body>
</html>
